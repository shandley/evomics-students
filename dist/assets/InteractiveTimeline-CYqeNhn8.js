import{j as e}from"./index-CaREKPZR.js";import{r as d,b as j,A as _,C as w,X as x,Y as u,T as p,L as f,c,d as C,e as m,f as K,B as z}from"./charts-9IbAAKVB.js";import b from"./student-data-CSAU1Xhx.js";import"./react-vendor-DJG_os-6.js";const O=({profiles:h,workshops:L})=>{const[l,k]=d.useState(!1),N=d.useMemo(()=>{const s={},o={};return h.forEach(a=>{Object.entries(a.participations).forEach(([t,r])=>{r.forEach(n=>{o[n]||(o[n]={}),o[n][t]||(o[n][t]=new Set),o[n][t].add(a.student.id)})})}),Object.entries(o).forEach(([a,t])=>{const r=parseInt(a);s[r]={year:r,total:0,wog:0,wpsg:0,wphylo:0},Object.entries(t).forEach(([n,i])=>{const g=i.size;n==="wog"?s[r].wog=g:n==="wpsg"?s[r].wpsg=g:n==="wphylo"&&(s[r].wphylo=g)}),s[r].total=s[r].wog+s[r].wpsg+s[r].wphylo}),Object.values(s).sort((a,t)=>a.year-t.year)},[h]),v=d.useMemo(()=>{const s={};return b.participations.forEach(o=>{const{year:a,location:t,workshopId:r,studentId:n}=o;["wog","wpsg","wphylo"].includes(r)&&(s[a]||(s[a]={year:a,total:0,wog:0,wpsg:0,wphylo:0,wog_colorado:0,wog_czech:0,wog_smithsonian:0,wog_other:0,multiLocation:!1}),r==="wog"&&(t.toLowerCase().includes("colorado")?s[a].wog_colorado++:t.toLowerCase().includes("czech")||t.toLowerCase().includes("krumlov")?s[a].wog_czech++:t.toLowerCase().includes("smithsonian")||t.toLowerCase().includes("washington")?s[a].wog_smithsonian++:s[a].wog_other++))}),Object.values(s).forEach(o=>{o.wog=o.wog_colorado+o.wog_czech+o.wog_smithsonian+o.wog_other;const a=[o.wog_colorado,o.wog_czech,o.wog_smithsonian,o.wog_other].filter(t=>t>0).length;o.multiLocation=a>1,o.total=o.wog+o.wpsg+o.wphylo}),Object.values(s).sort((o,a)=>o.year-a.year)},[]),y=d.useMemo(()=>{const s={};return b.participations.forEach(o=>{const{year:a,location:t,workshopId:r}=o;["wog","wpsg","wphylo"].includes(r)&&(s[a]||(s[a]={}),s[a][t]||(s[a][t]={}),s[a][t][r]=(s[a][t][r]||0)+1)}),s},[]),S=d.useMemo(()=>{const s={};h.forEach(r=>{Object.values(r.participations).forEach(n=>{n.forEach(i=>{s[i]||(s[i]=new Set),s[i].add(r.student.id)})})});const o=Object.keys(s).map(Number).sort();let a=0;const t=new Set;return o.map(r=>(s[r].forEach(n=>{t.has(n)||(t.add(n),a++)}),{year:r,cumulativeStudents:a,newStudents:s[r].size}))},[h]),W=({active:s,payload:o,label:a})=>{if(s&&o&&o.length){const t=parseInt(a),r=y[t]?Object.keys(y[t]).length:0;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:`Year: ${a}`}),o.map((n,i)=>e.jsx("p",{style:{color:n.color},className:"text-sm",children:`${n.dataKey==="wog"?"WoG":n.dataKey==="wpsg"?"WPSG":n.dataKey==="wphylo"?"WPhylo":n.name}: ${n.value}`},i)),r>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1 border-t pt-1",children:[r," location",r!==1?"s":""," • Toggle location view above"]})]})}return null};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Timeline Analysis"}),e.jsxs("button",{onClick:()=>k(!l),className:`px-4 py-2 text-sm rounded-md transition-colors ${l?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:[l?"Hide":"Show"," Location View"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Annual Workshop Participation",l&&e.jsx("span",{className:"ml-2 text-sm font-normal text-blue-600",children:"(Location View)"})]}),e.jsx("div",{className:"h-80",children:e.jsx(j,{width:"100%",height:"100%",children:l?e.jsxs(_,{data:v,children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(x,{dataKey:"year",stroke:"#6b7280",fontSize:12}),e.jsx(u,{stroke:"#6b7280",fontSize:12}),e.jsx(p,{content:({active:s,payload:o,label:a})=>{if(s&&o&&o.length){const t=o[0].payload;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:`Year: ${a}`}),e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("p",{className:"text-sm text-blue-600",children:["WoG Total: ",t.wog]}),t.wog_smithsonian>0&&e.jsxs("p",{className:"text-xs text-blue-700 ml-2",children:["• Smithsonian DC: ",t.wog_smithsonian]}),t.wog_czech>0&&e.jsxs("p",{className:"text-xs text-blue-700 ml-2",children:["• Czech Republic: ",t.wog_czech]}),t.wog_colorado>0&&e.jsxs("p",{className:"text-xs text-blue-700 ml-2",children:["• Colorado State: ",t.wog_colorado]}),t.wog_other>0&&e.jsxs("p",{className:"text-xs text-blue-700 ml-2",children:["• Other: ",t.wog_other]}),t.wpsg>0&&e.jsxs("p",{className:"text-sm text-purple-600",children:["WPSG: ",t.wpsg]}),t.wphylo>0&&e.jsxs("p",{className:"text-sm text-green-600",children:["WPhylo: ",t.wphylo]}),t.multiLocation&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"⚡ Multi-location year"})]})]})}return null}}),e.jsx(f,{}),e.jsx(c,{type:"monotone",dataKey:"wog_smithsonian",stackId:"wog",stroke:"#1e40af",fill:"#1e40af",name:"WoG - Smithsonian DC"}),e.jsx(c,{type:"monotone",dataKey:"wog_czech",stackId:"wog",stroke:"#3b82f6",fill:"#3b82f6",name:"WoG - Czech Republic"}),e.jsx(c,{type:"monotone",dataKey:"wog_colorado",stackId:"wog",stroke:"#60a5fa",fill:"#60a5fa",name:"WoG - Colorado State"}),e.jsx(c,{type:"monotone",dataKey:"wog_other",stackId:"wog",stroke:"#93c5fd",fill:"#93c5fd",name:"WoG - Other"}),e.jsx(c,{type:"monotone",dataKey:"wpsg",stroke:"#9333ea",fill:"rgba(147, 51, 234, 0.3)",strokeWidth:2,name:"WPSG"}),e.jsx(c,{type:"monotone",dataKey:"wphylo",stroke:"#059669",fill:"rgba(5, 150, 105, 0.3)",strokeWidth:2,name:"WPhylo"})]}):e.jsxs(C,{data:N,children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(x,{dataKey:"year",stroke:"#6b7280",fontSize:12}),e.jsx(u,{stroke:"#6b7280",fontSize:12}),e.jsx(p,{content:e.jsx(W,{})}),e.jsx(f,{}),e.jsx(m,{type:"monotone",dataKey:"wog",stroke:"#2563eb",strokeWidth:3,name:"WoG",dot:{fill:"#2563eb",strokeWidth:2,r:4}}),e.jsx(m,{type:"monotone",dataKey:"wpsg",stroke:"#9333ea",strokeWidth:3,name:"WPSG",dot:{fill:"#9333ea",strokeWidth:2,r:4}}),e.jsx(m,{type:"monotone",dataKey:"wphylo",stroke:"#059669",strokeWidth:3,name:"WPhylo",dot:{fill:"#059669",strokeWidth:2,r:4}})]})})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l?"View WoG participation by location with stacked areas. Multi-location years show the distributed nature of workshop offerings.":"Track participation trends across the three core workshop series over time. Toggle location view to see geographic breakdown."})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cumulative Student Community Growth"}),e.jsx("div",{className:"h-80",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(K,{data:S,children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(x,{dataKey:"year",stroke:"#6b7280",fontSize:12}),e.jsx(u,{stroke:"#6b7280",fontSize:12}),e.jsx(p,{content:({active:s,payload:o,label:a})=>s&&o&&o.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:`Year: ${a}`}),e.jsx("p",{className:"text-sm text-blue-600",children:`New Students: ${o.find(t=>t.dataKey==="newStudents")?.value||0}`}),e.jsx("p",{className:"text-sm text-green-600",children:`Total Alumni: ${o.find(t=>t.dataKey==="cumulativeStudents")?.value||0}`})]}):null}),e.jsx(f,{}),e.jsx(z,{dataKey:"newStudents",fill:"#3b82f6",name:"New Students",radius:[2,2,0,0]}),e.jsx(m,{type:"monotone",dataKey:"cumulativeStudents",stroke:"#059669",strokeWidth:3,name:"Total Alumni",dot:{fill:"#059669",strokeWidth:2,r:4}})]})})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Shows how the Evomics student community has grown over time, with new students each year and cumulative alumni count."})]})]})};export{O as InteractiveTimeline};
