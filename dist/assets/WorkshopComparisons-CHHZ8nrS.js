import{j as e}from"./index-CaREKPZR.js";import{r as x,b as h,P as p,g as u,h as j,T as m,i as b,C as y,X as N,Y as w,L as f,B as v}from"./charts-9IbAAKVB.js";import"./react-vendor-DJG_os-6.js";const D=({profiles:o,workshops:n})=>{const c=x.useMemo(()=>{const a={participation:[],geographic:[]},t={wog:0,wpsg:0,wphylo:0},i={wog:new Set,wpsg:new Set,wphylo:new Set};return o.forEach(r=>{Object.keys(r.participations).forEach(s=>{r.participations[s].length>0&&s in t&&(t[s]++,i[s].add(r.student.country))})}),a.participation=Object.entries(t).map(([r,s])=>({name:n[r]?.shortName||r,value:s,color:r==="wog"?"#2563eb":r==="wpsg"?"#9333ea":"#059669"})),a.geographic=Object.entries(i).map(([r,s])=>({workshop:n[r]?.shortName||r,countries:s.size,students:t[r],diversity:(s.size/t[r]*100).toFixed(1)})),a},[o,n]),d=({active:a,payload:t})=>{if(a&&t&&t.length){const i=t[0].payload;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name||i.workshop}),e.jsx("p",{className:"text-sm text-gray-600",children:i.value?`Students: ${i.value}`:i.students?`Students: ${i.students}`:""}),i.countries&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Countries: ",i.countries]})]})}return null};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Workshop Participation Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(p,{children:[e.jsx(u,{data:c.participation,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:t})=>`${a} ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:c.participation.map((a,t)=>e.jsx(j,{fill:a.color},`cell-${t}`))}),e.jsx(m,{content:e.jsx(d,{})})]})})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Distribution of student participation across the three core workshops."})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Geographic Diversity by Workshop"}),e.jsx("div",{className:"h-64",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(b,{data:c.geographic,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"workshop"}),e.jsx(w,{}),e.jsx(m,{content:e.jsx(d,{})}),e.jsx(f,{}),e.jsx(v,{dataKey:"countries",fill:"#3b82f6",name:"Countries"})]})})}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Number of countries represented in each workshop series."})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Participating Countries"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.keys(n).map(a=>{const t={};o.forEach(s=>{s.participations[a]?.length>0&&(t[s.student.country]=(t[s.student.country]||0)+1)});const i=Object.entries(t).sort(([,s],[,l])=>l-s).slice(0,5),r=a==="wog"?"border-blue-200 bg-blue-50":a==="wpsg"?"border-purple-200 bg-purple-50":"border-green-200 bg-green-50";return e.jsxs("div",{className:`border rounded-lg p-4 ${r}`,children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:n[a]?.shortName}),e.jsx("div",{className:"space-y-2",children:i.map(([s,l],g)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[g+1,". ",s]}),e.jsx("span",{className:"font-medium",children:l})]},s))})]},a)})})]})]})};export{D as WorkshopComparisons};
